---
title: 'Defi'
date: '2024-10-25'
image: /misc/placeholder.webp
subtitle: Understanding the Building Blocks of Decentralized Finance
description: 'Understanding the Building Blocks of Decentralized Finance'
tags: ['Crypto']
---

<style jsx>{`
  .prose a {
    text-decoration: underline;
    color: var(--color-accent);
  }
  .prose ol {
    list-style-type: decimal;
    margin-left: 2em; /* Adjust as needed for indentation */
    padding-left: 0.5em; /* Add padding if needed */
  }
  .prose ol li {
    margin-bottom: 0.5em;
    color: var(--color-text-primary);
    line-height: 1.5; /* Adjust line height for better readability */
  }
`}</style>

<div class="tldr-section">

</div>

DeFi ecosystems are not just an assortment of financial services but an interconnected web of permission-less systems. The essence of these applications is token utility and interoperability, which is what we’re going to focus on in this chapter.

# Coins

Coins refer to the fee-paying currency that blockchains require to finalize transactions.

On the Ethereum blockchain, you pay transaction fees with ETH, its native coin. On the Solana blockchain, you pay transaction fees with SOL, its native coin. Bitcoin – BTC; Avalanche – AVAX; Algorand – ALGO; etc.

# Tokens

Tokens are smart contracts that are deployed on top of a blockchain. They refer to fungible and non-fungible tokens, which can be confusing, especially considering that they function differently than coins. Smart contracts are self-operating assortments of code that can run on blockchains without human interaction. Everything described below is possible because of smart contracts. A token’s programmable nature gives it qualities that have not existed before and can serve all sorts of new purposes.

# Smart Contracts

The fungibility and non-fungibility of any token are encoded into a smart contract, which is simply a program deployed on a blockchain. Various software standards have been implemented that classify tokens and their functions, such as ERC20 for fungible Ethereum tokens and the SPL standards for Solana tokens. These standards make it easy to create new tokens, and DEXes make it easy to trade them.

If you can encode a token’s fungible and non-fungible nature into its program, what else can you encode? Well, this is where it gets interesting.

# Tokenomics

An entire field of crypto has sprouted alongside the development of cryptocurrencies. This field, known as Tokenomics, is the study of cryptocurrency’s economic feasibility and utility.

Investors will research a token’s tokenomics to see if there are any events they should be wary of, such as team vesting schedules or community airdrops which may affect the value of the individual tokens themselves by putting more of that token into circulation.

Some founders and entrepreneurs utilize tokenomics from a more experimental point of view. They try to learn from past tokens’ mistakes and implement a framework that leads to a healthy valuation and growth life cycle for whatever they are working on. So be cautious of the tokenomics of any new token you invest in.

A cryptocurrency’s tokenomics can change; if you want an idea of how complicated it can get, read this.

# Stable Coins

Stablecoins are one of the highest-priority issues in the regulatory landscape. They are intended to retain a peg to another asset, such as a USD. The biggest stablecoins in the world are USDT and USDC, amounting to roughly $100 billion in combined value. Each of these coins is intended to be worth $1 at all times and enable all the benefits blockchains to offer.

There are three primary types of stablecoins.

Asset-backed – USDT and USDC are examples of asset-backed stablecoins where there is a supposed $1 or $1 worth of assets backing every 1 stablecoin.
Over-collateralized – MakerDAO’s DAI is an example of an over-collateralized stablecoin. Users can deposit volatile collateral like BTC on the Maker platform and receive DAI in return. To receive $100 worth of DAI, for example, a user will need to deposit $200 worth of BTC (assuming that the loan-to-value ratio is 2:1). If BTC drops in value to the point where you are unable to trade it back for your DAI (LTV ratios fluctuate based on market supply and demand dynamics so this liquidation point can change).
Algorithmic – Algorithmic coins are inherently more risky than the above stablecoins, but there are a few out there that seem to work, but it is still being determined if this model is scalable. Terra Classic was a $60 billion example of an algorithmic stablecoin that did not work and was a predictable culprit of an algorithmic stablecoin death spiral.
There are other stable coins out there, but the majority fall into one of the above categories and are tied to 1 USD. Sure, you could tie a stablecoin to 2 USD or 1,000,000 USD. You could make a new cryptocurrency, call it PIE, and peg it to $3.1415926535 – although the ticker PIE is already taken.

There are stable coins pegged to the EUR, AUD, etc., but most of the volume and use cases involve USD-based stablecoins.

# DeFi

Decentralized Finance (DeFi) highlights the difference between owning and possessing something. In traditional finance (TradFi), you are trusting intermediaries to do right by you every step of the way.

Here are some examples of that:

Every time you log into your bank account, you trust your bank to tell you your accurate balance and give you access. The bank also gets to do whatever they want with your money and not tell you.
Every trade you make on a brokerage, you’re trusting that you’re getting the right price and not being front-run by the exchange you’re trading with.
Every time you buy something with a funded debit or credit card, you trust that the bank will transfer the money from your account to the vendor’s account accordingly and that the vendor will accept the transfer.
Every time you attempt to open an account for any financial product or service, you are asking permission to do so.
In most parts of the world, this trust is taken for granted. This level of trust is too much in the other parts of the world that have experienced currency failures and uncapped business and banking corruption. Even in developed financial economies, this trust becomes a liability. If dirt hits the fan, do you trust your exchange to let you withdraw your money?

DeFi has a tumultuous and weathered history but is now a massive hundred-billion-dollar market with room to grow. TradFi markets are worth hundreds of trillions.

# Price Action

Crypto began as a single blockchain and a single currency. As several projects like MasterCoin and ColoredCoins popped up, Ethereum became the only one with staying power.

Ethereum paved the way for decentralized projects to bootstrap their funding rounds by issuing tokens in their 2014 ICO (Initial Coin Offering), which led to the ICO mania of 2017. Much has been documented about this time period as it was rife with scams and bewitching celebrities attempting cash grabs while the price of Ethereum soared to nearly $1500 and Bitcoin to almost $20,000.

In the following years, Ethereum would crash to less than $100, and Bitcoin would fall to $3200 during the Covid drop in March 2020. Then it was up only, down only, then up only, and now down only again.

The macroeconomic environment is continually finding itself in unprecedented territory, so it will be interesting to see how Bitcoin’s price and the cryptocurrency market react in the upcoming decades. Again, crypto is barely a teenager and has many uphill battles.

# DeFi Summer & The Standard Stack

As Bitcoin and Ethereum recovered during the remainder of 2020 after the Covid drop in March, something known as DeFi Summer took off. This was a movement being built in the background since 2017. Protocols like Uniswap, MakerDAO, Curve, Yearn, and Aave took off on Ethereum, and these protocols enabled the world’s first decentralized markets for lending, borrowing, and trading.

Millions and billions of dollars poured into these protocols and other applications.

This period was rampant with innovation and, at the same time, speculation. Prices were rising at unsustainable rates, and some protocols were failing while their tokens were going to zero. DeFi protocols like the ones listed above – with some staying power – have inspired thousands of blockchain applications to be built across dozens of blockchains.

There is a group of financial services that DeFi protocols inhabit that are mirrored on one new blockchain after the next. They have become the standard stack. Without the basic DeFi layer, blockchains are considered to be lacking. This is why you’ll see so many protocols that do the same thing on different blockchains.

Oddly enough, Bitcoin does not have a developed DeFi network. Although possible, the code is not built to foster DeFi, and the development community surrounding Bitcoin is not keen on enabling it.

# Case Study

To truly understand crypto, you need to participate in on-chain transactions.

Let’s compare aspects of the trade process at ETrade, one of the world’s largest centralized exchanges (CEX), vs. Jupiter Aggregator, Solana’s most advanced decentralized exchange (DEX). It’s not just a DEX. Jupiter is an aggregator of different DEXes.

If you submit a trade and Jupiter finds two options for how to do it, you’ll be presented with the option that gives you a better deal.

## ETrade

Even just opening an account at ETrade involves jumping over some hurdles.

To understand this full breakdown, you need to know what it means to be long and short. It’s weird phrasing if you’re unfamiliar, but being short means you make money when the prices go down, and being long means you make money when prices go up.

Here’s the unabridged process for funding an account on a CEX.

You open an account using an email and password. You submit government documents and perhaps a phone bill to verify your address.
You wait multiple days or weeks for your account to be approved. If there are any delays, it could be months – especially if you are opening an account on a crypto exchange.
Your account is approved, but now you have to deposit funds. If you choose to wire funds and pay wiring fees, you’ll usually be able to trade in 24 hours or so, but regular bank transfers can take 3-5 business days.
For your deposit to go through, it must be done during regular business hours, which are 8 am to 5 pm. If you decide to deposit funds at 6 pm on Thursday, for example – it wouldn’t go through until 8 am Friday, and if it’s a bank transfer, you probably won’t have access to your funds until the following Thursday or Friday.
The above processes do not even consider the number of centralized entities involved. The centralized exchange has a centralized custodian who possesses all of the stocks and options that people own. The centralized market makers have a much more in-depth understanding of current market conditions because they are privy to every single order. Etc.

Market makers are known to play games. Below is an example of that.

You want to buy 100 shares of Apple, so you press the right buttons to do so.
A market maker receives your order alongside 100 other people’s orders and decides you are a gullible sap.
The market maker sells you the 100 shares but not before buying 10 puts that represent a 10x exposure of being short to your 1x exposure of being long (a put = exposure to 100 shares of being short Apple). FYI, if they sell you 100 shares of Apple, they are technically short 100 shares, and buying 10 puts makes them long 900 shares.

The price of Apple goes up for a moment, and you are in profit. Then, as the market maker predicted based on having more information than you, the price crashes. The market maker closes their 10 puts and sees that you are trying to sell your 100 shares at a loss.
The market maker buys back your shares for less than they sold to you after profiting from the collapsing price of Apple. Then Apple rebounds and hits all-time highs.
The centralized exchanges often sell order flow in a business model called payment for order flow – PFOF, to market makers in exchange for the market makers to make markets. This is counterintuitive as it makes the information asymmetry already present in finance that much more dramatic. PFOF is the reason you can trade without commissions. As is the case across much of the traditional internet, if you use a free product – it’s actually you who is the product.

Unlike TradFi, no default intermediary safeguards your funds in DeFi, and there are no traditional market makers. There are automated market makers (AMMs), the blockchain mechanisms that underlay DEXes.

## Jupiter Aggregator

If you want to open an investment account on a blockchain, you would be opening the same account you need to operate on the blockchain in the first place – a non-custodial digital wallet – like Solflare. Sure, some fintech institutions are beginning to run like this, but it’s not the same. These fintech institutions can freeze your funds or delete your account anytime.

Blockchains can’t do that. You can only lose access to your funds if you lose access to your mnemonic or if you position yourself to be hacked by clicking on fraudulent phishing links or telling someone your mnemonic.

Let’s open an account on Jupiter.

Connect your funded wallet.
Boom. Done.

Let’s make a trade on Jupiter.

Input how much you want to trade and wait for it to be confirmed.
Boom. Done.

There is no counterparty dependence. You’re not trusting anything other than the open-source code backing the Jupiter Aggregator and the underlying blockchain itself.

This trade would not be sent to a centralized market maker who will play games with you. Instead, it is being sent to an AMM utilizing a liquidity pool. In short, liquidity pools are decentralized funds from individual Liquidity Providers (LPs). Liquidity providers are traders who lend funds to these pools in exchange for trading fees and potential liquidity incentives.

# Conclusion

DeFi is powerful, yet it is still only a toddler, and there are growing pains. There have been dozens, if not hundreds, of blockchain application exploits, and if you want to get involved, you really need to know what you’re doing. The remainder of this course focuses on the media’s favorite buzzwords – NFTs and DAOs. What is essential to consider is these sub-industries within crypto are just logical extensions of what DeFi can do.

Just remember:

Consensus methods are the foundation of blockchains.
Blockchains are the foundations of DeFi.
DeFi is the foundation of NFTs and DAOs.
